(this.webpackJsonpassessment=this.webpackJsonpassessment||[]).push([[0],{54:function(e,t,a){e.exports=a(81)},59:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a.n(n),l=(a(59),a(0)),c=a.n(l),o=a(38),s=a(39),m=a(52),i=a(40),u=a(53),d=a(13),p=a(20),E=a(17),b=a(22),g=a(41),v=a.n(g),f={user:null};if(localStorage.getItem("jwtToken")){var h=v()(localStorage.getItem("jwtToken"));1e3*h.exp<Date.now()?localStorage.removeItem("jwtToken"):f.user=h}var j=Object(l.createContext)({user:null,login:function(e){},logout:function(){}});function N(e,t){switch(t.type){case"LOGIN":return Object(b.a)({},e,{user:t.payload});case"LOGOUT":return Object(b.a)({},e,{user:null});default:return e}}function O(e){var t=Object(l.useReducer)(N,f),a=Object(E.a)(t,2),n=a[0],r=a[1];return c.a.createElement(j.Provider,Object.assign({value:{user:n.user,login:function(e){localStorage.setItem("jwtToken",e.accessToken),r({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("jwtToken"),r({type:"LOGOUT"})}}},e))}var w=function(){var e=Object(l.useContext)(j),t=e.user,a=e.logout;return t?c.a.createElement("header",null,c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper container"},c.a.createElement("a",{href:"https://48p1r2roz4.sse.codesandbox.io",className:"brand-logo"},"React"),c.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},c.a.createElement("li",null,c.a.createElement(d.b,{to:"/location"},"Locations")),c.a.createElement("li",null,c.a.createElement(d.b,{to:"/projects"},"Projects")),c.a.createElement("li",null,c.a.createElement(d.b,{onClick:a,to:""},"Logout")))))):c.a.createElement("header",null,c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper container"},c.a.createElement("a",{href:"https://48p1r2roz4.sse.codesandbox.io",className:"brand-logo"},"React"),c.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},c.a.createElement("li",null,c.a.createElement(d.b,{to:"/"},"Login"))))))},y=a(23),C=a(18),D=a(15),x=a(19),S=a.n(x);function k(){var e=Object(C.a)(["\n    mutation login(\n        $email:String!,\n        $password: String!\n        ){\n        loginUser(\n            user:{\n            email:$email,\n            password:$password\n            }\n        ){\n            accessToken message status\n        }\n    }\n"]);return k=function(){return e},e}var A=S()(k());var P=function(e){var t=Object(l.useContext)(j),a=Object(l.useState)(!1),n=Object(E.a)(a,2),r=n[0],o=n[1],s=Object(l.useState)({email:"",password:""}),m=Object(E.a)(s,2),i=m[0],u=m[1],d=function(e){u(Object(b.a)({},i,Object(y.a)({},e.target.name,e.target.value)))},p=Object(D.a)(A,{update:function(e,a){var n=a.data.loginUser;t.login(n)},onError:function(e){console.log(e),o(!0)},variables:i}),g=Object(E.a)(p,2),v=g[0],f=g[1].loading;return c.a.createElement("main",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"space-50"}),c.a.createElement("div",{className:"white form-wrapper"},c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 m6 offset-m3"},c.a.createElement("h5",{className:"title-color"},"Hey, Welcome back."),c.a.createElement("p",null,"Plug in your account detail below so we can open the gate for you!"),c.a.createElement("p",{className:r?"red center white-text":"hide",style:{width:"auto",padding:"10px 0"}},r?"Invalid credentials":""),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v()}},c.a.createElement("div",{className:"row center"},c.a.createElement("div",{className:"col s12 input-field"},c.a.createElement("input",{type:"email",name:"email",value:i.email,onChange:d,id:"email",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"email"},"Email Address")),c.a.createElement("div",{className:"col s12 input-field"},c.a.createElement("input",{type:"password",name:"password",value:i.password,onChange:d,id:"password",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"password"},"Password")),c.a.createElement("div",{className:"col s12"},c.a.createElement("button",{className:f?"btn btn-primary disabled":"btn btn-primary"},"Login")))))))))},$=a(29);function F(){var e=Object(C.a)(["\n{\n  loadLocations{\n  latitude\n  location\n  longitude\n}\n}\n"]);return F=function(){return e},e}var I=S()(F());var T=Object($.GoogleApiWrapper)({apiKey:"AIzaSyCn3U0hO2MEc3A1GA4cWmkJFD2HAGyvaGk"})((function(e){Object(l.useContext)(j).user||e.history.push("/");var t=Object(D.b)(I),a=t.loading,n=t.data;return a?c.a.createElement("p",null,"Please wait we are loading your data"):c.a.createElement("main",null,c.a.createElement($.Map,{google:e.google,zoom:14},n.loadLocations.map((function(e,t){return c.a.createElement($.Marker,{key:t,lat:e.latitude,lng:e.longitude,text:e.location})}))))}));function L(){var e=Object(C.a)(["\n            {\n                loadProject{\n                budget\n                contractorName\n                contractorAddress\n                endDate\n                id\n                startDate\n                title\n                }\n            }\n            "]);return L=function(){return e},e}var q=S()(L());function G(e){var t=Object(l.useContext)(j).user,a=Object(D.b)(q,{errorPolicy:"ignore"}),n=a.loading,r=a.data;t||e.history.push("/");function o(e){var t=new Date(e),a=t.getDate(),n=t.getMonth(),r=t.getFullYear();return isNaN(a)?e:a+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+" "+r}return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 m12"},c.a.createElement("div",{className:"space-50"}),c.a.createElement("h5",null,"Projects ",c.a.createElement(d.b,{to:"/create",onClick:function(){e.history.push("/create")},className:"btn right btn-secondary"},"Create Project")),c.a.createElement("br",null),c.a.createElement("br",null),n?c.a.createElement("p",null,"Please wait we are loading the projects"):c.a.createElement("table",{className:"striped"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Project"),c.a.createElement("th",null,"Contractor"),c.a.createElement("th",null,"Contractor Address"),c.a.createElement("th",null,"Budget"),c.a.createElement("th",null,"Start Date"),c.a.createElement("th",null,"End Date"))),c.a.createElement("tbody",null,r.loadProject.map((function(e,t){return c.a.createElement("tr",{className:"hoverable",key:t},c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.title),c.a.createElement("td",null,e.contractorName),c.a.createElement("td",null,e.contractorAddress),c.a.createElement("td",null,e.budget),c.a.createElement("td",null,o(e.startDate)),c.a.createElement("td",null,o(e.endDate)))})))))))}function z(){var e=Object(C.a)(["\n\nmutation create($title:String,$budget:Decimal,$startDate:String,$endDate:String,$contratorName:String,$contratorAddress:String\n){\n    createProject(\n        project:{\n            title: $title,\n            budget: $budget,\n            startDate: $startDate,\n            endDate:$endDate,\n            contractorName:$contratorName,\n            contractorAddress:$contratorAddress\n        }\n    ){\n        message status\n    }\n}"]);return z=function(){return e},e}var J=S()(z());var M=function(e){Object(l.useContext)(j).user||e.history.push("/");var t=Object(l.useState)({title:"",budget:0,startDate:"",endDate:"",contractorName:"",contratorAddress:""}),a=Object(E.a)(t,2),n=a[0],r=a[1],o=Object(D.a)(J,{update:function(t,a){a&&e.history.push("/projects")},onError:function(e){console.log(e)},variables:n}),s=Object(E.a)(o,2),m=s[0],i=s[1].loading,u=function(e){e.preventDefault(),r(Object(b.a)({},n,Object(y.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"space-50"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 m12"},c.a.createElement("h5",null,"Add Project"))),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m()}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",name:"title",value:n.title,onChange:u,id:"title",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"title"},"Project Title")),c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",name:"contractorName",value:n.contractorName,onChange:u,id:"contractorName",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"contractorName"},"Contractor Name")),c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",name:"contratorAddress",value:n.contractorAddress,onChange:u,id:"contractorAddress",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"contractorAddress"},"Contractor Address")),c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",id:"budget",name:"budget",onChange:u,value:parseFloat(n.budget),autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"budget"},"Budget")),c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",id:"start-date",name:"startDate",value:n.startDate,onChange:u,className:"datepicker",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"#start-date"},"Start Date")),c.a.createElement("div",{className:"col s12 m8 input-field"},c.a.createElement("input",{type:"text",id:"end-date",name:"endDate",value:n.endDate,onChange:u,className:"datepicker",autoComplete:"off",required:!0}),c.a.createElement("label",{htmlFor:"#end-date"},"End Date")),c.a.createElement("div",{className:"col s12 m8"},c.a.createElement("br",null),c.a.createElement("button",{className:i?"btn btn-secondary disabled":"btn btn-secondary"},"Save Project")))))},U=a(48);var B=function(e){var t=e.component,a=Object(U.a)(e,["component"]),n=Object(l.useContext)(j).user;return c.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(p.a,{to:"/projects"}):c.a.createElement(t,e)}}))},R=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(O,null,c.a.createElement(d.a,null,c.a.createElement(w,null),c.a.createElement(p.d,null,c.a.createElement(B,{exact:!0,path:"/",component:P}),c.a.createElement(p.b,{exact:!0,path:"/location",component:T}),c.a.createElement(p.b,{exact:!0,path:"/projects",component:G}),c.a.createElement(p.b,{exact:!0,path:"/create",component:M}))))}}]),t}(l.Component),W=a(7),H=a(49),K=a(21),Y=a(51),Q=a(50),V=Object(Y.a)({uri:"https://frontendassesment20200204015954.azurewebsites.net/graphql"}),X=Object(H.a)((function(){var e=localStorage.getItem("jwtToken");return{headers:{Authorization:e?"".concat(e):""}}})),Z=new K.a({link:X.concat(V),cache:new Q.a}),_=c.a.createElement(W.a,{client:Z},c.a.createElement(R,null));r.a.render(_,document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.b6c535be.chunk.js.map